# 微机原理

## 提纲

### 第一章：绪论

1. 冯·诺伊曼结构和哈佛结构
    * 冯·诺伊曼结构：程序指令存储器和数据存储器合并在一起的计算机设计概念结构
    * 哈佛结构：程序指令储存和数据储存分开的存储器结构
1. 微型计算机的组成
    1. 微处理器
        * 运算器：算术逻辑单元ALU
        * 控制器：指令寄存器、指令译码器、控制电路
    1. 存储器
        内存、存储器
    1. IO接口和外设
    1. 系统总线
1. 有、无符号数计算
    1. 数制转换
        1. 非十进制转十进制：加权乘法
        1. 十进制转非十进制：整数部分除R取余，小数部分乘R取整
        1. 二进制十六进制互转：四四分组
    1. 带符号数表示法
        1. 原码：最高位为符号位，其后为绝对值
            零有两种表示方法，运算复杂
        1. 反码：正数的反码是真值本身，负数的反码除符号位外逐位求反
            零有两种表示法，运算复杂
        1. 补码：原码除符号位取反加一
            只有负数才有补码
            $[[X]_{\text{补}}]_{\text{补}}=[X]_{\text{原}}$
            $[X\pm Y]_{\text{补}}=[X]_\text{补}+[\pm Y]_\text{补}$
    1. 进位表示
        双高位法：数值进位与符号进位异或
    1. BCD码的加减法运算
        **大于9的加6修正**：加0110、

### 第二章：Intel微处理器的结构

1. 功能结构
    * 总线接口单元BIU
        4个段寄存器，指令指针IP，指令队列寄存器，完成与EU通信的内部寄存器，加法器和总线控制逻辑
        执行总线周期，完成CPU与存储器和IO设备之间的信息传送
    * 执行单元EU
        逻辑运算单元ALU、暂存器、标志寄存器、通用寄存器和EU控制器
        执行指令，进行全部算术逻辑运算，完成偏移地址的计算，向BIU提供指令执行结果的数据和偏移地址，对通用寄存器和标志寄存器进行管理
1. 流水线技术、超流水线技术与超标量技术
    超标量技术：空间并行度，处理器内置多条流水线，同时执行多条指令
    超流水线技术：时间并行度，流水线细化多个等级，提高主频，一个周期完成多个操作
1. 寄存器结构
    1. 通用寄存器组
        AX：Add Register
        BX：Base Register
        CX：Count Register
        DX：Data Register
    1. 地址指针和变址寄存器
        SP：Stack Pointer，堆栈指针，存放堆栈段内偏移地址
        BP：Base Pointer，基址指针，对堆栈段寻址
        SI：Source Pointer；DI：Destination Pointer，变址指针，存放偏移地址
    1. 指令指针IP
    1. 标志寄存器
        1. 状态标志位
            符号标志S：Sign Flag
            进位标志C：Carry Flag
            溢出标志O：Overflow Flag，带符号数
            辅助进位标志A：Auxiliary Flag，最低半字节进位借位
            零标志Z：Zero Flag，结果为零
            奇偶标志P：Parity Flag，偶为1,奇为0，仅低字节
        1. 控制标志位
            方向标志D：Direction Flag，1为低到高，0为高到低
            中断允许标志I：Interrupt-enable Flag，1为允许，0为屏蔽，仅针对外部可屏蔽中断（INTR线）
            追踪标志T：Trace Flag
    1. 段寄存器
        CS：Code Segment，代码段寄存器
        DS：Data Segment，数据段寄存器
        SS：Stack Segment，堆栈段寄存器
        ES：Extra Segment，附加段寄存器
1. 存储器结构
    逻辑地址表示为  段地址:偏移地址
    物理地址=段地址 x 10H + 偏移地址
    规则字：低位在偶地址的字

### 第三章：80x86指令系统

1. 寻址方式
    1. 立即寻址：操作数在代码中
        MOV AX,1234H
    1. 寄存器寻址
        MOV AX,BX
    1. 存储器寻址
        地址偏移量（有效地址） = 基址 + 变址 + 位移量
        基址：BP、BX
        变址：SI、DI
        1. 直接寻址
            MOV AX,[1234H]
        1. 寄存器间接寻址
            MOV AX,[BX]
        1. 寄存器相对寻址
            MOV AX,[BX + 1000H]
            MOV AX,1000H[BX]
        1. 基址变址寻址
            MOV AX,[BX + SI]
            MOV AX,[BX][SI]
        1. 相对基址变址寻址
            MOV AX,[BX + SI + 1234H]
            MOV AX,1234H[BX][SI]
    1. IO端口寻址
        1. 直接端口寻址（8位）
            IN AL,20H
            OUT 20H,AX
        1. 间接端口寻址（16位）
            端口地址存放在DX中
1. 指令系统
    1. MOV
        * 类型一致
        * 立即数、CS不能作为目的操作数
        * 不能两个操作数都是内存操作数、段寄存器
        * 不能把立即数送到段寄存器
    1. PUSH、POP
        16位，除CS不能作目的操作数之外的通用寄存器，段寄存器和存储器，不能是立即数
        PUSH，栈顶上浮2位，即减2
        POP，加2
    1. INT
        标志寄存器压栈：SP-2
        清除标志寄存器中的I和T
        把CS和IP压栈：SP-4
        调用中断
        返回用IRET

### 第四章：汇编语言程序设计

### 第五章：微机总线技术

### 第六章：存储系统

1. 双极型RAM、MOS型RAM
1. SRAM、DRAM
1. 高速缓冲存储器
    1. 读写操作
        读：命中时直接访问Cache，数据不在Cache时从存储器读取并复制到Cache
        写：命中时新数据写入Cache同时写入主存，未命中时只向主存保存信息
    1. 地址映射
        1. 全相连映像：主存中一个数据块可以映射到Cache中任何一个区块
        1. 直接映像：主存区块只映射到Cache中唯一特定的区块
        1. 组相连映像：两者折中，Cache分组，每组与主存全相连，组地址与直接映像类似

### 第七章：输入/输出接口

1. IO接口功能
1. 中断分类
1. DMA基本方法

### 第八章：常用接口技术

1. 定时方法
1. 串行并行通信优缺点
